(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{3275:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>f});var t=s(5155),l=s(2115),a=s(2619),n=s.n(a),i=s(63),o=s(6651),c=s(6630),d=s(5530),x=s(3),u=s(3457),g=s(6191),m=s(7434),h=s(908),b=s(5016),v=s(2663);function p(){let e=(0,i.useSearchParams)(),[r,s]=(0,l.useState)("grid"),[a,p]=(0,l.useState)(!1),[f,j]=(0,l.useState)({category:e.get("category")||void 0,search:e.get("search")||void 0,condition:e.get("condition")||void 0,sortBy:"createdAt",sortOrder:"desc"}),{products:N,pagination:y,isLoading:w,error:P}=(0,m.Q)(f),{addItem:C}=(0,h.x)(),A=(e,r)=>{j(s=>({...s,[e]:r}))},k=e=>{C(e),v.oR.success("Produit ajout\xe9 au panier !")};return P?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-orange-500 text-6xl mb-4",children:"⚠️"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur de chargement"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Impossible de charger les produits"}),(0,t.jsx)(n(),{href:"/",className:"bg-green-900 text-white px-6 py-3 rounded-xl hover:bg-green-800 transition-colors",children:"Retour \xe0 l'accueil"})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("section",{className:"bg-gradient-to-r from-green-900 to-green-800 text-white py-16",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Catalogue FastDeal"}),(0,t.jsx)("p",{className:"text-xl text-green-100 mb-8 max-w-2xl mx-auto",children:"D\xe9couvrez notre s\xe9lection premium d'\xe9lectronique d'occasion certifi\xe9e"}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:f.search||"",onChange:e=>A("search",e.target.value),placeholder:"Rechercher un produit...",className:"w-full px-6 py-4 text-gray-900 bg-white rounded-2xl focus:outline-none focus:ring-4 focus:ring-orange-500/50 shadow-xl"}),(0,t.jsx)(o.A,{className:"absolute right-4 top-4 w-6 h-6 text-gray-400"})]})})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,t.jsx)("div",{className:"lg:w-1/4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Filtres"}),(0,t.jsx)("button",{onClick:()=>p(!a),className:"lg:hidden p-2 text-gray-500 hover:text-green-900",children:(0,t.jsx)(c.A,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-6 ".concat(a?"block":"hidden lg:block"),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Cat\xe9gorie"}),(0,t.jsx)("select",{value:f.category||"",onChange:e=>A("category",e.target.value||void 0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-900/20 focus:border-green-900",children:[{value:"",label:"Toutes les cat\xe9gories"},{value:"smartphone",label:"Smartphones"},{value:"tablet",label:"Tablettes"},{value:"laptop",label:"Ordinateurs portables"},{value:"desktop",label:"Ordinateurs de bureau"},{value:"smartwatch",label:"Montres connect\xe9es"},{value:"accessory",label:"Accessoires"},{value:"other",label:"Autres"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"\xc9tat"}),(0,t.jsx)("select",{value:f.condition||"",onChange:e=>A("condition",e.target.value||void 0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-900/20 focus:border-green-900",children:[{value:"",label:"Tous les \xe9tats"},{value:"excellent",label:"Excellent"},{value:"very-good",label:"Tr\xe8s bon"},{value:"good",label:"Bon"},{value:"fair",label:"Correct"},{value:"poor",label:"M\xe9diocre"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Prix"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("input",{type:"number",placeholder:"Prix min",value:f.minPrice||"",onChange:e=>A("minPrice",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-900/20 focus:border-green-900"}),(0,t.jsx)("input",{type:"number",placeholder:"Prix max",value:f.maxPrice||"",onChange:e=>A("maxPrice",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-900/20 focus:border-green-900"})]})]}),(0,t.jsx)("button",{onClick:()=>j({sortBy:"createdAt",sortOrder:"desc"}),className:"w-full px-4 py-3 text-green-900 border border-green-900 rounded-xl hover:bg-green-50 transition-colors font-medium",children:"R\xe9initialiser les filtres"})]})]})}),(0,t.jsxs)("div",{className:"lg:w-3/4",children:[(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-8",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("span",{className:"text-gray-600 font-medium",children:[(null==y?void 0:y.totalProducts)||0," produit(s) trouv\xe9(s)"]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("select",{value:"".concat(f.sortBy,"-").concat(f.sortOrder),onChange:e=>(e=>{let[r,s]=e.split("-");j(e=>({...e,sortBy:r,sortOrder:s}))})(e.target.value),className:"px-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-900/20 focus:border-green-900",children:[{value:"createdAt-desc",label:"Plus r\xe9cents"},{value:"createdAt-asc",label:"Plus anciens"},{value:"price-asc",label:"Prix croissant"},{value:"price-desc",label:"Prix d\xe9croissant"},{value:"name-asc",label:"Nom A-Z"},{value:"name-desc",label:"Nom Z-A"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsxs)("div",{className:"flex bg-gray-100 rounded-xl p-1",children:[(0,t.jsx)("button",{onClick:()=>s("grid"),className:"p-2 rounded-lg transition-colors ".concat("grid"===r?"bg-green-900 text-white":"text-gray-500 hover:text-green-900"),children:(0,t.jsx)(d.A,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>s("list"),className:"p-2 rounded-lg transition-colors ".concat("list"===r?"bg-green-900 text-white":"text-gray-500 hover:text-green-900"),children:(0,t.jsx)(x.A,{className:"w-5 h-5"})})]})]})]})}),w?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(9)].map((e,r)=>(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"bg-gray-200 rounded-2xl h-64 mb-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3"})]})]},r))}):N&&N.length>0?(0,t.jsxs)(t.Fragment,{children:["grid"===r?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>{var r,s;return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 group hover:-translate-y-1",children:[(0,t.jsxs)("div",{className:"relative",children:[e.images.length>0&&(0,t.jsx)("img",{src:(null==(r=e.images.find(e=>e.isPrimary))?void 0:r.url)||(null==(s=e.images[0])?void 0:s.url),alt:e.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)("span",{className:"bg-green-900 text-white text-xs font-bold px-3 py-1 rounded-full",children:(0,b.F$)(e.category)})}),e.discountPercentage>0&&(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsxs)("span",{className:"bg-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:["-",e.discountPercentage,"%"]})}),(0,t.jsx)("button",{className:"absolute bottom-4 right-4 bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-colors",children:(0,t.jsx)(u.A,{className:"w-5 h-5 text-gray-600 hover:text-orange-500"})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-2 line-clamp-2 text-lg",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-4 font-medium",children:[e.brand," • ",(0,b.Mo)(e.condition)]}),(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-green-900",children:(0,b.$g)(e.price)}),e.originalPrice&&e.originalPrice>e.price&&(0,t.jsx)("span",{className:"text-sm text-gray-500 line-through ml-2",children:(0,b.$g)(e.originalPrice)})]})}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(n(),{href:"/products/".concat(e._id),className:"flex-1 text-center border-2 border-green-900 text-green-900 py-2 rounded-xl hover:bg-green-50 transition-colors font-semibold",children:"D\xe9tails"}),(0,t.jsx)("button",{onClick:()=>k(e),className:"bg-gradient-to-r from-green-900 to-green-800 text-white p-2 rounded-xl hover:from-green-800 hover:to-green-700 transition-all duration-200 hover:scale-105",children:(0,t.jsx)(g.A,{className:"w-5 h-5"})})]})]})]},e._id)})}):(0,t.jsx)("div",{className:"space-y-6",children:N.map(e=>{var r,s;return(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,t.jsxs)("div",{className:"md:w-1/3 relative",children:[e.images.length>0&&(0,t.jsx)("img",{src:(null==(r=e.images.find(e=>e.isPrimary))?void 0:r.url)||(null==(s=e.images[0])?void 0:s.url),alt:e.name,className:"w-full h-48 md:h-full object-cover"}),(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)("span",{className:"bg-green-900 text-white text-xs font-bold px-3 py-1 rounded-full",children:(0,b.F$)(e.category)})}),e.discountPercentage>0&&(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsxs)("span",{className:"bg-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full",children:["-",e.discountPercentage,"%"]})})]}),(0,t.jsxs)("div",{className:"md:w-2/3 p-6 flex flex-col justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e.name}),(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:[e.brand," • ",(0,b.Mo)(e.condition)]}),(0,t.jsx)("p",{className:"text-gray-700 mb-4 line-clamp-2",children:e.description})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-3xl font-bold text-green-900",children:(0,b.$g)(e.price)}),e.originalPrice&&e.originalPrice>e.price&&(0,t.jsx)("span",{className:"text-lg text-gray-500 line-through ml-3",children:(0,b.$g)(e.originalPrice)})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(n(),{href:"/products/".concat(e._id),className:"border-2 border-green-900 text-green-900 px-6 py-2 rounded-xl hover:bg-green-50 transition-colors font-semibold",children:"Voir d\xe9tails"}),(0,t.jsx)("button",{onClick:()=>k(e),className:"bg-gradient-to-r from-green-900 to-green-800 text-white px-6 py-2 rounded-xl hover:from-green-800 hover:to-green-700 transition-all duration-200 font-semibold",children:"Ajouter au panier"})]})]})]})]})},e._id)})}),y&&y.totalPages>1&&(0,t.jsx)("div",{className:"flex justify-center items-center space-x-2 mt-12",children:Array.from({length:y.totalPages},(e,r)=>r+1).map(e=>(0,t.jsx)("button",{onClick:()=>A("page",e),className:"px-4 py-2 rounded-xl font-medium transition-colors ".concat(e===(y.currentPage||1)?"bg-green-900 text-white":"bg-white text-gray-700 hover:bg-green-50 hover:text-green-900"),children:e},e))})]}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"text-6xl mb-6",children:"\uD83D\uDD0D"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Aucun produit trouv\xe9"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Essayez de modifier vos filtres ou votre recherche"}),(0,t.jsx)("button",{onClick:()=>j({sortBy:"createdAt",sortOrder:"desc"}),className:"bg-green-900 text-white px-8 py-3 rounded-xl hover:bg-green-800 transition-colors font-semibold",children:"Voir tous les produits"})]})]})]})})]})}function f(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-lg text-gray-600",children:"Chargement des produits..."})}),children:(0,t.jsx)(p,{})})}},6401:(e,r,s)=>{"use strict";s.d(r,{Ck:()=>n,QT:()=>a});var t=s(2115),l=s(7967);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,s]=(0,t.useState)([]),[a,n]=(0,t.useState)(null),[i,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null);return(0,t.useEffect)(()=>{(async()=>{o(!0),d(null);try{await new Promise(e=>setTimeout(e,500));let r=[...l.PW];if(e.category&&(r=r.filter(r=>r.category===e.category)),e.search){let s=e.search.toLowerCase();r=r.filter(e=>e.name.toLowerCase().includes(s)||e.brand.toLowerCase().includes(s)||e.description.toLowerCase().includes(s))}e.condition&&(r=r.filter(r=>r.condition===e.condition)),e.minPrice&&(r=r.filter(r=>r.price>=e.minPrice)),e.maxPrice&&(r=r.filter(r=>r.price<=e.maxPrice)),e.featured&&(r=r.filter(e=>e.featured));let t=e.sortBy||"createdAt",a=e.sortOrder||"desc";r.sort((e,r)=>{let s=e[t],l=r[t];return("price"===t?(s=Number(s),l=Number(l)):"name"===t?(s=s.toLowerCase(),l=l.toLowerCase()):"createdAt"===t&&(s=new Date(s).getTime(),l=new Date(l).getTime()),"asc"===a)?s<l?-1:+(s>l):s>l?-1:+(s<l)});let i=e.page||1,o=e.limit||12,c=(i-1)*o,d=r.slice(c,c+o),x=r.length,u=Math.ceil(x/o);s(d),n({currentPage:i,totalPages:u,totalProducts:x,hasNextPage:i<u,hasPrevPage:i>1})}catch(e){d("Erreur lors du chargement des produits"),console.error("Error fetching products:",e)}finally{o(!1)}})()},[e.category,e.search,e.condition,e.minPrice,e.maxPrice,e.sortBy,e.sortOrder,e.page,e.limit,e.featured]),{products:r,pagination:a,isLoading:i,error:c}}function n(){let[e,r]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{(async()=>{a(!0);try{await new Promise(e=>setTimeout(e,300)),r(l.vG)}catch(e){console.error("Error fetching categories:",e)}finally{a(!1)}})()},[]),{categories:e,isLoading:s}}},7434:(e,r,s)=>{"use strict";s.d(r,{A:()=>l.A,Q:()=>t.QT});var t=s(6401),l=s(9497)},8227:(e,r,s)=>{Promise.resolve().then(s.bind(s,3275))}},e=>{e.O(0,[297,663,125,556,614,441,255,358],()=>e(e.s=8227)),_N_E=e.O()}]);