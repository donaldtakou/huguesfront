(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{532:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},3664:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},3979:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(5155),a=s(2115),l=s(2619),i=s.n(l),o=s(63),n=s(3664),c=s(9708),d=s(532),u=s(7828),m=s(2544),x=s(2663),h=s(6315),g=s(9497);function p(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),p=(0,o.useRouter)(),{login:f}=(0,g.A)(),{register:y,handleSubmit:b,formState:{errors:v}}=(0,m.mN)(),w=async e=>{l(!0);try{let s=await f(e.email,e.password);if(s.success){var t;x.oR.success("Connexion r\xe9ussie !"),(null==(t=s.user)?void 0:t.role)==="admin"?p.push("/admin"):p.push("/dashboard")}else x.oR.error(s.error||"Erreur de connexion")}catch(e){x.oR.error("Une erreur est survenue")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(h.A,{size:"lg"})}),(0,r.jsx)("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Connectez-vous \xe0 votre compte"}),(0,r.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",(0,r.jsx)(i(),{href:"/auth/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"cr\xe9ez un nouveau compte"})]})]}),(0,r.jsxs)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[(0,r.jsxs)("form",{className:"space-y-6",onSubmit:b(w),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(n.A,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{...y("email",{required:"L'email est requis",pattern:{value:/^\S+@\S+$/i,message:"Format d'email invalide"}}),type:"email",autoComplete:"email",className:"appearance-none block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"votre@email.com"})]}),v.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(c.A,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{...y("password",{required:"Le mot de passe est requis",minLength:{value:6,message:"Le mot de passe doit contenir au moins 6 caract\xe8res"}}),type:e?"text":"password",autoComplete:"current-password",className:"appearance-none block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Votre mot de passe"}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,r.jsx)(d.A,{className:"h-5 w-5 text-gray-400"}):(0,r.jsx)(u.A,{className:"h-5 w-5 text-gray-400"})})]}),v.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:v.password.message})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)(i(),{href:"/auth/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oubli\xe9 ?"})})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Connexion..."]}):"Se connecter"})})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Ou"})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Compte de d\xe9monstration :"," ",(0,r.jsx)("button",{type:"button",onClick:()=>{w({email:"admin@fastdeal.com",password:"admin123"})},className:"font-medium text-blue-600 hover:text-blue-500",children:"Admin FastDeal"})]})})]})]}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)(i(),{href:"/",className:"text-sm text-gray-600 hover:text-gray-500",children:"â† Retour \xe0 l'accueil"})})]})]})}},6315:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5155);s(2115);var a=s(512);let l=e=>{let{className:t="",size:s="md",variant:l="default",showText:i=!0}=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2 ".concat(t),children:[(0,r.jsxs)("div",{className:"relative ".concat({sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16"}[s]),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-green-700 to-green-900 rounded-lg shadow-lg"}),(0,r.jsx)("div",{className:"relative flex items-center justify-center w-full h-full",children:(0,r.jsx)(a.A,{className:"".concat("sm"===s?"w-4 h-4":"md"===s?"w-5 h-5":"lg"===s?"w-6 h-6":"w-8 h-8"," text-white"),strokeWidth:2.5})}),(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full border-2 border-white"})]}),i&&(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"font-bold ".concat({sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-4xl"}[s]," ").concat({default:{cart:"text-blue-600",text:"text-gray-800"},white:{cart:"text-white",text:"text-white"},dark:{cart:"text-blue-500",text:"text-gray-900"}}[l].text," leading-none"),children:["Fast",(0,r.jsx)("span",{className:"text-green-900",children:"Deal"})]}),"sm"!==s&&(0,r.jsx)("span",{className:"text-xs text-black  mt-1",children:"\xc9lectronique d'occasion"})]})]})}},7621:(e,t,s)=>{"use strict";s.d(t,{FH:()=>r,O5:()=>l,QF:()=>i,R2:()=>a,c4:()=>o});let r=s(5125).A.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/auth/login"),Promise.reject(e)});let a={register:e=>r.post("/auth/register",e),login:e=>r.post("/auth/login",e),getProfile:()=>r.get("/auth/profile"),updateProfile:e=>r.put("/auth/profile",e),changePassword:e=>r.put("/auth/change-password",e),logout:()=>r.post("/auth/logout"),verifyToken:()=>r.get("/auth/verify")},l=e=>{localStorage.setItem("token",e)},i=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},o=()=>localStorage.getItem("token")},7828:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9050:(e,t,s)=>{Promise.resolve().then(s.bind(s,3979))},9497:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(2115),a=s(7621);function l(){let[e,t]=(0,r.useState)({user:null,isLoading:!0,isAuthenticated:!1});(0,r.useEffect)(()=>{s()},[]);let s=async()=>{if(!(0,a.c4)())return void t({user:null,isLoading:!1,isAuthenticated:!1});try{await a.R2.verifyToken();let e=await a.R2.getProfile();t({user:e.data.user,isLoading:!1,isAuthenticated:!0})}catch(e){(0,a.QF)(),t({user:null,isLoading:!1,isAuthenticated:!1})}},l=async(e,s)=>{try{let{token:r,user:l}=(await a.R2.login({email:e,password:s})).data;return(0,a.O5)(r),localStorage.setItem("user",JSON.stringify(l)),t({user:l,isLoading:!1,isAuthenticated:!0}),{success:!0,user:l}}catch(e){var r,l;return{success:!1,error:(null==(l=e.response)||null==(r=l.data)?void 0:r.message)||"Login failed"}}},i=async e=>{try{let{token:s,user:r}=(await a.R2.register(e)).data;return(0,a.O5)(s),localStorage.setItem("user",JSON.stringify(r)),t({user:r,isLoading:!1,isAuthenticated:!0}),{success:!0,user:r}}catch(e){var s,r;return{success:!1,error:(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Registration failed"}}},o=async()=>{try{await a.R2.logout()}catch(e){}finally{(0,a.QF)(),t({user:null,isLoading:!1,isAuthenticated:!1})}},n=async e=>{try{let s=(await a.R2.updateProfile(e)).data.user;return localStorage.setItem("user",JSON.stringify(s)),t(e=>({...e,user:s})),{success:!0,user:s}}catch(e){var s,r;return{success:!1,error:(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Profile update failed"}}},c=async(e,t)=>{try{return await a.R2.changePassword({currentPassword:e,newPassword:t}),{success:!0}}catch(e){var s,r;return{success:!1,error:(null==(r=e.response)||null==(s=r.data)?void 0:s.message)||"Password change failed"}}};return{...e,login:l,register:i,logout:o,updateProfile:n,changePassword:c,refreshAuth:s}}},9708:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1847).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}},e=>{e.O(0,[297,663,125,432,441,255,358],()=>e(e.s=9050)),_N_E=e.O()}]);